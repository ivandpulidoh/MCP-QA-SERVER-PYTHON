# Selenium MCP Server - Test Automation con BDD y Page Object Model

## Descripci√≥n del Proyecto

Este proyecto utiliza un **Selenium MCP Server** para crear automatizaciones de pruebas utilizando **Behavior-Driven Development (BDD)**, **Python** y el patr√≥n **Page Object Model (POM)**. El sistema es capaz de construir una automatizaci√≥n completa utilizando √∫nicamente los pasos descritos en un archivo de caracter√≠sticas (feature), y cuenta con la capacidad de reparar autom√°ticamente escenarios rotos.

### Caracter√≠sticas Principales

- ü§ñ **Automatizaci√≥n Inteligente**: Genera c√≥digo de automatizaci√≥n a partir de descripciones en lenguaje natural (Gherkin)
- üîß **Auto-reparaci√≥n**: Capacidad de detectar y reparar escenarios de prueba fallidos autom√°ticamente
- üìã **BDD con Behave**: Implementaci√≥n de pruebas usando el framework Behave para Python
- üèóÔ∏è **Page Object Model**: Arquitectura de pruebas siguiendo el patr√≥n POM para mejor mantenibilidad
- üîå **Integraci√≥n MCP**: Utiliza el Selenium MCP Server para interactuar con navegadores mediante herramientas MCP

## Arquitectura del Proyecto

```
mcp-qa-server-python/
‚îú‚îÄ‚îÄ features/                    # Archivos de caracter√≠sticas BDD (Gherkin)
‚îÇ   ‚îú‚îÄ‚îÄ sign_in.feature         # Ejemplo de feature para registro en utest.com
‚îÇ   ‚îî‚îÄ‚îÄ steps/                  # Definiciones de pasos (step definitions)
‚îú‚îÄ‚îÄ pages/                       # Page Objects siguiendo el patr√≥n POM
‚îÇ   ‚îî‚îÄ‚îÄ base_page.py            # Clase base para todos los page objects
‚îú‚îÄ‚îÄ selenium_mcp_server/        # Referencias al servidor MCP
‚îú‚îÄ‚îÄ requirements.txt            # Dependencias del proyecto
‚îú‚îÄ‚îÄ behave.ini                  # Configuraci√≥n de Behave
‚îî‚îÄ‚îÄ README.MD                   # Este archivo
```

## Tecnolog√≠as Utilizadas

- **Python**: Lenguaje de programaci√≥n principal
- **Selenium**: Framework de automatizaci√≥n web
- **Behave**: Framework BDD para Python
- **WebDriver Manager**: Gesti√≥n autom√°tica de drivers de navegador
- **MCP (Model Context Protocol)**: Protocolo para comunicaci√≥n con el servidor Selenium

## Instalaci√≥n y Configuraci√≥n

### Requisitos Previos

- Python 3.7 o superior
- Navegador Chrome instalado
- Acceso a internet para descargar drivers

### Pasos de Instalaci√≥n

1. **Clonar el repositorio** (si aplica):
   ```bash
   git clone <url-del-repositorio>
   cd mcp-qa-server-python
   ```

2. **Crear un entorno virtual** (recomendado):
   ```bash
   python -m venv venv
   ```

3. **Activar el entorno virtual**:
   - Windows:
     ```bash
     venv\Scripts\activate
     ```
   - Linux/Mac:
     ```bash
     source venv/bin/activate
     ```

4. **Instalar dependencias**:
   ```bash
   pip install -r requirements.txt
   ```

### Dependencias

El proyecto requiere las siguientes dependencias (ver `requirements.txt`):

- `behave==1.2.6`: Framework BDD para Python
- `selenium==4.15.2`: Framework de automatizaci√≥n web
- `webdriver-manager==4.0.1`: Gesti√≥n autom√°tica de drivers

## C√≥mo Funciona

### Flujo de Trabajo

El proceso de automatizaci√≥n sigue estos pasos:

1. **Definici√≥n de Escenarios**: Se crea un archivo `.feature` con los escenarios de prueba en lenguaje Gherkin
   
2. **Ejecuci√≥n con MCP Server**: El cliente MCP LLM (Cursor, Visual Studio Code, etc.) utiliza las herramientas del Selenium_MCP_Server para:
   - Abrir un navegador
   - Navegar a URLs
   - Interactuar con elementos (clic, escritura, selecci√≥n)
   - Validar estados de la p√°gina

3. **Generaci√≥n de C√≥digo**: El LLM recupera los selectores utilizados y genera:
   - **Page Objects**: Clases que representan las p√°ginas web siguiendo el patr√≥n POM
   - **Step Definitions**: Implementaciones de los pasos definidos en los archivos feature

4. **Ejecuci√≥n y Validaci√≥n**: Se ejecuta el test con el comando:
   ```bash
   behave features/sign_in.feature
   ```

5. **Auto-reparaci√≥n**: Si el test falla, el sistema intenta reparar autom√°ticamente el escenario hasta que funcione correctamente

### Ejemplo de Uso

#### Archivo Feature (Gherkin)

```gherkin
Feature: Register on the utest.com website

    @TC-01
    Scenario: Fill in all the required fields for step 1
        Given I open de browser
        When  I navigate to "utest.com"
        And I click on the "Join Now" button
        Then I wait for the page "https://utest.com/signup/personal" to load
        When I fill the fields of the form
            | type   | field_name     | value              |
            | input  | First name:    | Ruben              |
            | input  | Last name:     | Smith              |
            | input  | Email address: | rsmith@example.com |
            | select | Month          | February           |
            | select | Day            | 5                  | 
            | select | Year           | 2000               |
        Then I valid that all fields have been filled correctly
        When I click on the "Next: Location" button
        Then I wait for the page "https://utest.com/signup/address" to load
```

#### Prompt para el LLM

```
Execute the steps described in the sign_in.feature file in Chrome using selenium-mcp-server and create the step definitions using the selectors you use to follow them; create the necessary page objects following the Page Object Model pattern.

After creating the step definitions and page models, run the command behave features/sign_in.feature to test the correct operation of the created code. If it fails, repair the test.
```

## Estructura de Page Objects

El proyecto utiliza el patr√≥n Page Object Model para organizar el c√≥digo:

### BasePage

La clase `BasePage` proporciona funcionalidades comunes para todos los page objects:

- `wait_for_url()`: Espera a que la URL coincida con la esperada
- `wait_for_element()`: Espera a que un elemento est√© presente
- `wait_for_element_clickable()`: Espera a que un elemento sea clickeable

Todos los page objects heredan de `BasePage` para mantener consistencia y reutilizaci√≥n de c√≥digo.

## Ejecuci√≥n de Pruebas

### Ejecutar un Feature Espec√≠fico

```bash
behave features/sign_in.feature
```


## Integraci√≥n con Selenium MCP Server

Este proyecto utiliza el [Selenium MCP Server](https://github.com/KiranMote/Selenium_MCP_Server) que proporciona herramientas MCP para:

- Iniciar y controlar navegadores
- Navegar a URLs
- Interactuar con elementos de la p√°gina
- Capturar screenshots
- Validar presencia de elementos
- Y muchas otras operaciones de automatizaci√≥n web

## Ventajas del Enfoque

1. **Mantenibilidad**: El c√≥digo est√° organizado siguiendo patrones establecidos (POM)
2. **Legibilidad**: Los tests se escriben en lenguaje natural (Gherkin)
3. **Reutilizaci√≥n**: Los page objects pueden ser reutilizados en m√∫ltiples tests
4. **Automatizaci√≥n Inteligente**: El LLM puede generar y reparar c√≥digo autom√°ticamente
5. **Escalabilidad**: F√°cil agregar nuevos features y escenarios

## Referencias

- [Selenium MCP Server](https://github.com/KiranMote/Selenium_MCP_Server)
- [Behave Documentation](https://behave.readthedocs.io/)
- [Selenium Python Documentation](https://selenium-python.readthedocs.io/)
- [Page Object Model Pattern](https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/)
